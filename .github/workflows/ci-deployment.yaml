name: ADF Release pipeline

on: 
  push:
    branches:
    - main
run-name: Deploy to ${{ inputs.Environment }} by @${{ github.actor }}

permissions:
  id-token: write
  contents: read
  
jobs:
  Deploy-ADF-Dev:
    runs-on: windows-latest
    environment: ${{ inputs.Environment }}

    steps:
    - name: Checkout Code
      uses: actions/checkout@v3
   
    - name: Delete unwanted integration runtime
      run: |
          git clone --branch master --single-branch https://github.com/microsoft/azure-pipelines-tasks.git
          cd azure-pipelines-tasks/Tasks/WindowsMachineFileCopyV2
          ./WindowsMachineFileCopy.ps1
